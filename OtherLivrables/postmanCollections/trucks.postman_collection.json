{
  "info": {
    "name": "TruckFlow - Trucks CRUD",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const response = pm.response.json();",
                  "if (response.success && response.data.accessToken) {",
                  "    pm.environment.set('accessToken', response.data.accessToken);",
                  "    pm.environment.set('refreshToken', response.data.refreshToken);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@truckflow.com\",\n  \"password\": \"password123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Login Driver",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const response = pm.response.json();",
                  "if (response.success && response.data.accessToken) {",
                  "    pm.environment.set('driverToken', response.data.accessToken);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"driver@truckflow.com\",\n  \"password\": \"driver123456\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        }
      ]
    },
    {
      "name": "Trucks",
      "item": [
        {
          "name": "Get All Trucks",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/trucks",
              "host": ["{{baseUrl}}"],
              "path": ["trucks"]
            }
          }
        },
        {
          "name": "Get Available Trucks",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/trucks/available",
              "host": ["{{baseUrl}}"],
              "path": ["trucks", "available"]
            }
          }
        },
        {
          "name": "Get Truck By ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/trucks/{{truckId}}",
              "host": ["{{baseUrl}}"],
              "path": ["trucks", "{{truckId}}"]
            }
          }
        },
        {
          "name": "Create Truck",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const response = pm.response.json();",
                  "if (response.success && response.data._id) {",
                  "    pm.environment.set('truckId', response.data._id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"licensePlate\": \"ABC-1234\",\n  \"brand\": \"Volvo\",\n  \"model\": \"FH16\",\n  \"year\": 2023,\n  \"capacity\": 25000,\n  \"status\": \"available\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/trucks",
              "host": ["{{baseUrl}}"],
              "path": ["trucks"]
            }
          }
        },
        {
          "name": "Update Truck",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"brand\": \"Mercedes-Benz\",\n  \"model\": \"Actros\",\n  \"capacity\": 30000,\n  \"status\": \"maintenance\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/trucks/{{truckId}}",
              "host": ["{{baseUrl}}"],
              "path": ["trucks", "{{truckId}}"]
            }
          }
        },
        {
          "name": "Assign Driver to Truck",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"driverId\": \"{{driverId}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/trucks/{{truckId}}/assign",
              "host": ["{{baseUrl}}"],
              "path": ["trucks", "{{truckId}}", "assign"]
            }
          }
        },
        {
          "name": "Unassign Driver from Truck",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/trucks/{{truckId}}/unassign",
              "host": ["{{baseUrl}}"],
              "path": ["trucks", "{{truckId}}", "unassign"]
            }
          }
        },
        {
          "name": "Delete Truck",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/trucks/{{truckId}}",
              "host": ["{{baseUrl}}"],
              "path": ["trucks", "{{truckId}}"]
            }
          }
        }
      ]
    }
  ]
}
